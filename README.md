# 我的水印 - 图片去水印/加水印工具

一个基于 Web 的图片水印处理工具，支持多种去水印和加水印方式。

## 功能特点

### 去水印功能

- **自动检测**：自动识别并去除浅色/白色文字水印
- **手动选择区域**：在图片上框选水印区域进行去除
- **按颜色去除**：指定颜色范围来去除特定颜色的水印
- **频域滤波**：去除周期性平铺的水印

### 加水印功能

- **文字水印**：自定义文字、字体大小、颜色、旋转角度
- **图片水印**：上传图片作为水印，支持透明 PNG
- **二维码水印**：输入链接自动生成二维码作为水印
- **日期时间水印**：自动添加当前日期/时间戳，支持多种格式

### 通用功能

- **批量处理**：支持同时处理多张图片，打包 ZIP 下载
- **水印模板**：保存常用水印设置，一键复用
- **暗色模式**：支持深色主题，自动适配系统偏好
- **格式转换**：支持 PNG、JPG、WebP 输出格式
- **图片压缩**：可调节输出质量（10%-100%）

## 安装

1. 确保已安装 Python 3.8+

2. 安装依赖：
```bash
pip install -r requirements.txt
```

## 运行

```bash
python app.py
```

然后在浏览器中打开 http://localhost:5001

## 使用方法

### 去水印

1. 上传包含水印的图片
2. 选择去水印方式：
   - **自动检测**：适用于浅色/白色的文字水印，可调整亮度阈值
   - **手动选择区域**：在图片上拖拽选择水印区域
   - **按颜色去除**：选择水印的颜色范围
   - **频域滤波**：适用于平铺重复的水印
3. 点击"开始处理"
4. 下载处理后的图片

### 加水印

1. 上传需要添加水印的图片
2. 选择"添加自定义水印"模式
3. 选择水印类型：
   - **文字水印**：输入水印文字，设置字体大小、颜色、旋转角度
   - **图片水印**：上传水印图片，调整缩放比例
   - **二维码水印**：输入链接，自动生成二维码
   - **日期时间水印**：选择日期格式或自定义格式
4. 设置水印位置、透明度、边距
5. 点击"开始处理"
6. 下载处理后的图片

### 批量处理

1. 切换到"批量处理"模式
2. 上传多张图片
3. 选择处理方式和参数
4. 点击"批量处理并下载 ZIP"

## 技术栈

- 后端：Flask + OpenCV + Pillow
- 前端：HTML5 + CSS3 + JavaScript
- 设计：Glassmorphism 玻璃拟态风格

## 依赖说明

- `flask` - Web 框架
- `flask-cors` - 跨域支持
- `opencv-python` - 图像处理
- `numpy` - 数值计算
- `pillow` - 图像处理
- `qrcode[pil]` - 二维码生成

## 更新日志

### v1.2 (2025-01-25)
- 新增：二维码水印功能
- 新增：日期时间水印功能
- 优化：水印标签页支持四种类型

### v1.1 (2025-01-25)
- 新增：批量处理功能
- 新增：水印模板保存
- 新增：暗色模式
- 新增：图片压缩和格式转换
- 新增：批量手动区域标记

### v1.0
- 初始版本，包含基础去水印和加水印功能
