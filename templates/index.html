<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>我的水印 - My Watermark</title>
    <link rel="stylesheet" href="/static/style.css">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'><rect fill='%235D9B47' width='16' height='16'/><rect fill='%234A7C38' x='0' y='8' width='16' height='8'/><rect fill='%23FCEE4B' x='6' y='4' width='4' height='4'/></svg>">
</head>
<body>
    <div class="container">

        <h1>
            <span class="title-icon">💧</span>
            我的水印
            <span class="title-icon">✨</span>
        </h1>

        <!-- 副标题 -->
        <div class="subtitle-bar">
            <span class="subtitle-text">一键去除图片水印</span>
        </div>

        <div class="upload-section">
            <div class="upload-area" id="uploadArea">
                <input type="file" id="imageInput" accept="image/*" hidden>
                <div class="upload-prompt">
                    <div class="upload-icon-wrapper">📤</div>
                    <p>点击或拖拽上传图片</p>
                    <span>支持 JPG、PNG、WebP 格式</span>
                </div>
            </div>
        </div>

        <div class="preview-section" id="previewSection" style="display: none;">
            <div class="image-container">
                <div class="image-box">
                    <h3>
                        <span class="box-icon">📜</span>
                        原图
                    </h3>
                    <div class="image-wrapper">
                        <img id="originalImage" alt="原图">
                        <canvas id="maskCanvas" style="display: none;"></canvas>
                    </div>
                </div>
                <div class="image-box result-box">
                    <h3>
                        <span class="box-icon">✨</span>
                        处理结果
                    </h3>
                    <div class="image-wrapper">
                        <img id="resultImage" alt="结果">
                        <div class="placeholder" id="resultPlaceholder">
                            <span class="placeholder-icon">⏳</span>
                            <span>等待魔法...</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="controls">
                <div class="controls-header">
                    <span class="controls-icon">🔧</span>
                    <span class="controls-title">工作台</span>
                </div>

                <div class="method-select">
                    <label>
                        <span class="label-icon">⚡</span>
                        去水印方式：
                    </label>
                    <select id="methodSelect">
                        <option value="auto">🔮 自动检测（浅色水印）</option>
                        <option value="region">✋ 手动选择区域</option>
                        <option value="color">🎨 按颜色去除</option>
                        <option value="frequency">🌊 频域滤波（平铺水印）</option>
                    </select>
                </div>

                <div class="method-options" id="autoOptions">
                    <div class="option-header">
                        <span class="option-icon">💡</span>
                        亮度阈值调节
                    </div>
                    <label>
                        当前值：<span id="thresholdValue" class="value-display">200</span>
                    </label>
                    <input type="range" id="threshold" min="100" max="255" value="200">
                    <div class="slider-labels">
                        <span>深色</span>
                        <span>浅色</span>
                    </div>
                </div>

                <div class="method-options" id="regionOptions" style="display: none;">
                    <div class="option-header">
                        <span class="option-icon">📐</span>
                        区域选择
                    </div>
                    <p>在左侧图片上拖拽选择水印区域</p>
                    <div class="region-inputs">
                        <label>
                            <span class="coord-label">X</span>
                            <input type="number" id="regionX" value="0">
                        </label>
                        <label>
                            <span class="coord-label">Y</span>
                            <input type="number" id="regionY" value="0">
                        </label>
                        <label>
                            <span class="coord-label">W</span>
                            <input type="number" id="regionW" value="100">
                        </label>
                        <label>
                            <span class="coord-label">H</span>
                            <input type="number" id="regionH" value="50">
                        </label>
                    </div>
                </div>

                <div class="method-options" id="colorOptions" style="display: none;">
                    <div class="option-header">
                        <span class="option-icon">🎯</span>
                        颜色范围
                    </div>
                    <p>选择要去除的水印颜色范围</p>
                    <div class="color-inputs">
                        <label>
                            <span class="color-label">下限</span>
                            <input type="color" id="colorLower" value="#c8c8c8">
                        </label>
                        <label>
                            <span class="color-label">上限</span>
                            <input type="color" id="colorUpper" value="#ffffff">
                        </label>
                    </div>
                </div>

                <div class="action-buttons">
                    <button id="processBtn" class="btn primary">
                        <span class="btn-icon">⚔️</span>
                        开始处理
                    </button>
                    <button id="downloadBtn" class="btn download" disabled>
                        <span class="btn-icon">📥</span>
                        下载结果
                    </button>
                    <button id="resetBtn" class="btn reset">
                        <span class="btn-icon">🔄</span>
                        重新上传
                    </button>
                </div>
            </div>
        </div>

        <!-- 加载遮罩 -->
        <div class="loading" id="loading" style="display: none;">
            <div class="loading-content">
                <div class="spinner">
                    <div class="spinner-cube"></div>
                </div>
                <p class="loading-text">施展魔法中...</p>
                <div class="loading-dots">
                    <span>.</span><span>.</span><span>.</span>
                </div>
            </div>
        </div>

        <!-- 页脚 -->
        <footer class="footer">
            <div class="footer-content">
                <span>我的水印 © 2025</span>
            </div>
        </footer>
    </div>

    <script src="/static/app.js"></script>
</body>
</html>
